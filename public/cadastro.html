<!-- admin.html -->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Painel do Administrador</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
  <div class="container mt-5">
    <h2 class="mb-4">Cadastrar Sites de Sexshop</h2>
    <form id="formSite">
      <div class="mb-3">
        <label for="urlSite" class="form-label">URL do Site</label>
        <input type="url" class="form-control" id="urlSite" placeholder="https://exemplo.com" required>
      </div>
      <button type="submit" class="btn btn-success">Cadastrar Site</button>
    </form>

    <hr class="my-4">
    <h4>Sites cadastrados</h4>
    <ul id="listaSites" class="list-group mt-2"></ul>
  </div>

  <script>
    const form = document.getElementById('formSite');
    const listaSites = document.getElementById('listaSites');

    const sites = JSON.parse(localStorage.getItem("sexshopSites") || "[]");

    function atualizarLista() {
      listaSites.innerHTML = "";
      sites.forEach((site, i) => {
        const li = document.createElement("li");
        li.className = "list-group-item d-flex justify-content-between align-items-center";
        li.innerHTML = `
          ${site}
          <button class="btn btn-sm btn-danger" onclick="remover(${i})">Remover</button>
        `;
        listaSites.appendChild(li);
      });
    }

    function remover(index) {
      sites.splice(index, 1);
      localStorage.setItem("sexshopSites", JSON.stringify(sites));
      atualizarLista();
    }

    form.addEventListener("submit", e => {
      e.preventDefault();
      const url = document.getElementById('urlSite').value.trim();
      if (url && !sites.includes(url)) {
        sites.push(url);
        localStorage.setItem("sexshopSites", JSON.stringify(sites));
        atualizarLista();
        form.reset();
      }
    });

      // Função para cadastrar site
  async function cadastrarSite(url) {
    const response = await fetch("https://buscador-7f1v.onrender.com/cadastrar-site", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ url })
    });

    if (!response.ok) {
      const erro = await response.json();
      throw new Error(erro.error || "Erro ao cadastrar");
    }
    return await response.json();
  }

  // Função para carregar sites cadastrados
  async function carregarSites() {
    const response = await fetch("https://buscador-7f1v.onrender.com/sites");
    return await response.json();
}




    atualizarLista();


  </script>
</body>
</html>
